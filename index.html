<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Gold Leaf Money Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Nunito:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-black: #0a0a0a;
            --card-gray: #161616;
            --gold-primary: #D4AF37; /* Metallic Gold */
            --gold-bright: #FFD700;
            --gold-dim: #996515;
            --text-light: #f4f4f4;
            --text-dim: #888;
            --danger: #ff4d4d;
            --success: #00ff88;
        }

        body { 
            font-family: 'Nunito', sans-serif; 
            margin: 0; 
            background: var(--bg-black); 
            color: var(--text-light);
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .main-wrapper {
            width: 100%;
            max-width: 1000px;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 25px;
        }

        @media (max-width: 850px) {
            .main-wrapper { grid-template-columns: 1fr; }
        }

        h2, h3 { 
            font-family: 'Playfair Display', serif; 
            color: var(--gold-primary); 
            margin-top: 0;
            letter-spacing: 1px;
        }

        .panel {
            background: var(--card-gray);
            padding: 25px;
            border-radius: 4px; /* Sharper edges for a more premium look */
            border: 1px solid #222;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
        }

        /* Form Styling */
        .input-row { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        
        input, select {
            padding: 12px;
            background: #000;
            border: 1px solid #333;
            color: #fff;
            border-radius: 4px;
            outline: none;
            font-family: 'Nunito', sans-serif;
        }

        input:focus { border-color: var(--gold-primary); }

        .date-input { flex: 1; min-width: 150px; }
        .amt-input { flex: 2; min-width: 120px; font-weight: bold; color: var(--gold-bright); }
        .note-input { width: 100%; margin-bottom: 20px; box-sizing: border-box; }

        /* Buttons */
        .type-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .type-btn {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: 1px solid var(--gold-dim);
            color: var(--gold-primary);
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .type-btn.active { background: var(--gold-dim); color: #fff; }
        
        .save-btn {
            width: 100%;
            padding: 15px;
            background: var(--gold-primary);
            color: #000;
            border: none;
            font-weight: 800;
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.3s;
        }
        .save-btn:hover { background: var(--gold-bright); }

        /* Balance Display */
        .balance-box {
            background: linear-gradient(135deg, #1a1a1a 0%, #000 100%);
            border: 1px solid var(--gold-dim);
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
        }
        .balance-box .label { font-size: 12px; text-transform: uppercase; color: var(--gold-primary); }
        .balance-box .amount { font-size: 42px; font-family: 'Playfair Display', serif; color: #fff; margin: 10px 0; }

        /* History */
        .history-item {
            display: grid;
            grid-template-columns: 100px 1fr 100px 60px;
            padding: 15px 10px;
            border-bottom: 1px solid #222;
            align-items: center;
            cursor: pointer;
        }
        .history-item:hover { background: #1f1f1f; }
        .item-date { font-size: 11px; color: var(--text-dim); }
        .item-note { font-weight: 600; font-size: 14px; }
        .item-amt { text-align: right; font-weight: bold; }
        
        .gold-text { color: var(--gold-primary); }
        .in { color: var(--success); }
        .out { color: var(--danger); }

        /* Toast */
        #toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: var(--gold-primary); color: #000; padding: 10px 30px;
            border-radius: 20px; font-weight: bold; display: none;
        }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="left-col">
        <div class="panel">
            <h2>New Transaction</h2>
            <div class="input-row">
                <input type="date" id="entryDate" class="date-input">
                <input type="number" id="amt" class="amt-input" placeholder="0.00">
                <select id="cur">
                    <option value="₺">₺</option>
                    <option value="$">$</option>
                    <option value="€">€</option>
                </select>
            </div>
            <input type="text" id="note" class="note-input" placeholder="Description / Note">
            
            <div class="type-selector">
                <button class="type-btn" id="inBtn" onclick="setType('in')">INCOME</button>
                <button class="type-btn" id="outBtn" onclick="setType('out')">EXPENSE</button>
            </div>
            
            <button class="save-btn" onclick="saveData()">Confirm Entry</button>
        </div>

        <div class="panel" style="margin-top: 25px;">
            <h3>Transaction History</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <div class="right-col">
        <div class="balance-box">
            <div class="label">Net Balance</div>
            <div class="amount"><span id="total">0</span> <span id="totalCur">₺</span></div>
        </div>

        <div class="panel">
            <h3>Filter & Search</h3>
            <input type="search" id="search" placeholder="Search notes..." style="width:100%; margin-bottom:15px;">
            <button onclick="exportData()" style="width:100%; padding:10px; background:#222; border:1px solid var(--gold-dim); color:var(--gold-primary); cursor:pointer;">
                Export to CSV
            </button>
        </div>
    </div>
</div>

<div id="toast">Saved Successfully</div>

<script>
    let db = JSON.parse(localStorage.getItem('gold_tracker_db')) || [];
    let currentType = 'in';

    // Set default date to today
    document.getElementById('entryDate').valueAsDate = new Date();

    function setType(t) {
        currentType = t;
        document.getElementById('inBtn').classList.toggle('active', t === 'in');
        document.getElementById('outBtn').classList.toggle('active', t === 'out');
    }

    function saveData() {
        const amount = parseFloat(document.getElementById('amt').value);
        const note = document.getElementById('note').value;
        const date = document.getElementById('entryDate').value;
        const currency = document.getElementById('cur').value;

        if (!amount || !date) {
            alert("Please enter amount and date");
            return;
        }

        const entry = {
            id: Date.now(),
            amount,
            note: note || "No description",
            date,
            type: currentType,
            currency
        };

        db.unshift(entry);
        localStorage.setItem('gold_tracker_db', JSON.stringify(db));
        
        // Reset Form
        document.getElementById('amt').value = '';
        document.getElementById('note').value = '';
        
        render();
        flashToast();
    }

    function deleteItem(id) {
        if(confirm("Permanently remove this record?")) {
            db = db.filter(item => item.id !== id);
            localStorage.setItem('gold_tracker_db', JSON.stringify(db));
            render();
        }
    }

    function render() {
        const list = document.getElementById('historyList');
        const search = document.getElementById('search').value.toLowerCase();
        
        let total = 0;
        list.innerHTML = '';

        db.forEach(item => {
            // Update Running Total (simplified for primary currency)
            if(item.type === 'in') total += item.amount;
            else total -= item.amount;

            // Search Filter
            if (item.note.toLowerCase().includes(search)) {
                const row = document.createElement('div');
                row.className = 'history-item';
                row.innerHTML = `
                    <div class="item-date">${item.date}</div>
                    <div class="item-note">${item.note}</div>
                    <div class="item-amt ${item.type}">
                        ${item.type === 'in' ? '+' : '-'}${item.amount} ${item.currency}
                    </div>
                    <div style="text-align:right">
                        <span onclick="deleteItem(${item.id})" style="cursor:pointer; color:var(--danger)">✕</span>
                    </div>
                `;
                list.appendChild(row);
            }
        });

        document.getElementById('total').textContent = total.toLocaleString();
        document.getElementById('totalCur').textContent = document.getElementById('cur').value;
    }

    function flashToast() {
        const t = document.getElementById('toast');
        t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 2000);
    }

    function exportData() {
        let csv = "Date,Note,Type,Amount,Currency\n";
        db.forEach(i => {
            csv += `${i.date},${i.note},${i.type},${i.amount},${i.currency}\n`;
        });
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.setAttribute('href', url);
        a.setAttribute('download', 'finances.csv');
        a.click();
    }

    document.getElementById('search').oninput = render;
    setType('in');
    render();
</script>

</body>
</html>
